<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    .container .btn {
      width: 100%;
      height: 50px;
    } 
    .container .orderList .order{
      display: flex;
      justify-content: center;
      align-items: center;
      margin-bottom: 2px;
      width: 100%;
      height: 50px;
      background-color: #a95454;
      border: 1px solid #000;
    }
  </style>
</head>
<body>
  <div class="container">
    <button class="btn">刷新</button>
    <div class="orderList"></div>
    <!-- <div class="order" data-id="1"><span>1</span><button>刷新</button></div> -->
  </div>
  <script>
    const xhr = new XMLHttpRequest()
    // 假设我们已经拥有所有订单的订单id
    const data = [
      {id:1,orderName:'订单1'},
      {id:2,orderName:'订单2'},
      {id:3,orderName:'订单3'},
      {id:4,orderName:'订单4'},
      {id:5,orderName:'订单5'},
      {id:6,orderName:'订单6'},
      {id:7,orderName:'订单7'},
      {id:8,orderName:'订单8'},
      {id:9,orderName:'订单9'},
      {id:10,orderName:'订单10'},
    ]

    for(let i=0;i<data.length;i++) {
      //对于每一个id发送请求获取最后更新时间
      xhr.open('GET', `http://hmajax.itheima.net/api/area?${data[i].id}`)
      xhr.addEventListener('loadend', function () {
          const data = JSON.parse(this.response)
          //存储对应id和最后更新时间
          data[i].updateTime = data.updateTime
      })
      xhr.send()
    }
    // 根据最后更新时间倒序排序
    data.sort((order1,order2)=> {
      //根据时间戳进行时间比较
      const date1 = +new Date(order1.updateTime)
      const date2 = +new Date(order2.updateTime)
      return 
    })
  </script>
</body>
</html>